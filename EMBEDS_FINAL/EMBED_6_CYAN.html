function getStepContent() {
if(currentStep === 1) { return `<div class="step-grid grid-cols-1 md:grid-cols-2 animate-fadeIn h-screen-adaptive"><div class="md:col-span-2 border-l-4 border-[#00F0FF] pl-3 md:pl-4 mb-2 md:mb-3"><h2 class="text-2xl md:text-4xl font-black uppercase text-slate-900 leading-none">LE BUSINESS</h2><p class="text-gray-400 text-[10px] md:text-xs font-bold uppercase tracking-widest mt-1">Identification du sujet.</p></div><div class="group md:col-span-1"><label class="block text-[10px] md:text-xs font-black uppercase tracking-widest mb-1.5 md:mb-1.5 text-black">Nom de la marque</label><input type="text" value="${formData.brandName}" onfocus="typeConsole('IDENTIFYING BRAND...')" oninput="window.updateInput('brandName', this.value)" class="w-full p-3 bg-gray-50 border-2 border-gray-100 focus:border-black outline-none font-bold text-base md:text-lg transition-all" placeholder="Ex: Nike"></div><div class="group md:col-span-1"><label class="block text-[10px] md:text-xs font-black uppercase tracking-widest mb-1.5 md:mb-1.5 text-black">Concurrents</label><input type="text" value="${formData.competitors}" onfocus="typeConsole('SCANNING COMPETITION...')" oninput="window.updateInput('competitors', this.value)" class="w-full p-3 bg-gray-50 border-2 border-gray-100 focus:border-black outline-none font-bold text-base md:text-lg transition-all" placeholder="Qui voulez-vous d√©passer ?"></div><div class="group md:col-span-2"><label class="block text-[10px] md:text-xs font-black uppercase tracking-widest mb-1.5 md:mb-1.5 text-black">Le Pitch</label><textarea rows="2" onfocus="typeConsole('ANALYZING PITCH...')" oninput="window.updateInput('pitch', this.value)" class="w-full p-3 bg-gray-50 border-2 border-gray-100 focus:border-black outline-none font-medium text-sm md:text-base transition-all resize-none" placeholder="Que faites-vous ? (Soyez le plus exhaustif possible)">${formData.pitch}</textarea></div></div>`; }
if(currentStep === 2) { return `<div class="animate-fadeIn h-screen-adaptive"><div class="border-l-4 border-[#00F0FF] pl-3 md:pl-4 mb-3 md:mb-4"><h2 class="text-2xl md:text-4xl font-black uppercase text-slate-900 leading-none">LA CIBLE</h2><p class="text-gray-400 text-[10px] md:text-xs font-bold uppercase tracking-widest mt-1">A qui doit-on parler ?</p></div><div class="grid grid-cols-1 md:grid-cols-2 gap-3 md:gap-4"><div class="space-y-3"><div class="group"><label class="block text-[10px] md:text-xs font-black uppercase tracking-widest mb-1.5 text-black">Cible Principale</label><textarea rows="2" onfocus="typeConsole('TARGETING AUDIENCE...')" oninput="window.updateInput('target', this.value)" class="w-full p-2.5 md:p-2.5 bg-gray-50 border-2 border-gray-100 focus:border-black outline-none font-medium text-sm md:text-sm resize-none" placeholder="Qui est le client id√©al ?">${formData.target}</textarea></div><div class="group"><label class="block text-[10px] md:text-xs font-black uppercase tracking-widest mb-1.5 text-black">Douleur (Probl√®me)</label><textarea rows="2" onfocus="typeConsole('IDENTIFYING PAIN POINTS...')" oninput="window.updateInput('problem', this.value)" class="w-full p-2.5 md:p-2.5 bg-gray-50 border-2 border-gray-100 focus:border-black outline-none font-medium text-sm md:text-sm resize-none" placeholder="Qu'est-ce qui l'emp√™che de dormir ?">${formData.problem}</textarea></div></div><div class="space-y-3"><div class="group"><label class="block text-[10px] md:text-xs font-black uppercase tracking-widest mb-1.5 text-black">La Solution</label><textarea rows="2" onfocus="typeConsole('DEFINING SOLUTION...')" oninput="window.updateInput('solution', this.value)" class="w-full p-2.5 md:p-2.5 bg-gray-50 border-2 border-gray-100 focus:border-black outline-none font-medium text-sm md:text-sm resize-none" placeholder="Comment r√©solvez-vous son probl√®me ?">${formData.solution}</textarea></div><div class="group"><label class="block text-[10px] md:text-xs font-black uppercase tracking-widest mb-1.5 text-black">Pourquoi vous ?</label><textarea rows="2" onfocus="typeConsole('CALCULATING UNFAIR ADVANTAGE...')" oninput="window.updateInput('whyUs', this.value)" class="w-full p-2.5 md:p-2.5 bg-gray-50 border-2 border-gray-100 focus:border-black outline-none font-medium text-sm md:text-sm resize-none" placeholder="Votre avantage injuste.">${formData.whyUs}</textarea></div></div></div></div>`; }
if(currentStep === 3) {
return `<div class="step-grid grid-cols-1 animate-fadeIn h-screen-adaptive content-center"><div class="border-l-4 border-[#00F0FF] pl-3 md:pl-4 mb-3 md:mb-3"><h2 class="text-2xl md:text-4xl font-black uppercase text-slate-900 leading-none">ARCH√âTYPE</h2><p class="text-gray-400 text-[10px] md:text-xs font-bold uppercase tracking-widest mt-1">L'identit√© de votre marque.</p></div><label class="block text-[10px] md:text-xs font-black uppercase tracking-widest mb-2 md:mb-2 text-black">Choisissez votre arch√©type</label><div class="grid grid-cols-3 md:grid-cols-4 gap-2 md:gap-2.5 grid-archetypes">${ARCHETYPES.map(a => `<div onclick="window.selectArchetype('${a.id}')" id="arch-${a.id}" class="cursor-pointer p-2 md:p-2.5 border-2 flex flex-col items-center justify-center text-center transition-all hover:bg-black hover:text-white group ${formData.archetype === a.id ? 'bg-black text-white border-black shadow-[4px_4px_0px_0px_#00F0FF]' : 'bg-white border-gray-200 hover:border-black'}"><span class="text-2xl md:text-2xl mb-1 md:mb-1.5 group-hover:scale-110 transition-transform">${a.icon}</span><span class="text-[8px] md:text-[9px] font-bold uppercase block leading-tight">${a.name}</span><span class="text-[7px] md:text-[8px] font-normal uppercase opacity-60 mt-1 leading-tight hidden md:block">${a.desc}</span></div>`).join('')}</div></div>`;
}
if(currentStep === 4) {
let fileListHTML = ''; if(fileStore.length > 0) { fileListHTML = `<div class="mt-2 flex gap-2 flex-wrap">` + fileStore.map((f, i) => `<div class="bg-black text-white text-[10px] font-bold px-2 py-1 rounded flex items-center gap-2"><span>${f.name.substring(0,12)}...</span><button onclick="window.removeFile(${i})" class="text-[#00F0FF]">x</button></div>`).join('') + `</div>`; }
return `<div class="step-grid grid-cols-1 md:grid-cols-2 animate-fadeIn h-screen-adaptive gap-3 md:gap-4"><div class="md:col-span-2 border-l-4 border-[#00F0FF] pl-3 md:pl-4 mb-2 md:mb-2"><h2 class="text-2xl md:text-4xl font-black uppercase text-slate-900 leading-none">TONALIT√â & STYLE</h2><p class="text-gray-400 text-[10px] md:text-xs font-bold uppercase tracking-widest mt-1">Calibrage de votre site.</p></div><div class="md:col-span-1 space-y-3"><div class="bg-gray-50 p-3 md:p-3 border border-gray-200"><label class="block text-[10px] md:text-xs font-black uppercase tracking-widest mb-2 md:mb-2 text-gray-400">Vibes du site</label><div class="range-wrap mb-3 md:mb-3"><div class="flex justify-between text-[9px] md:text-[10px] font-bold uppercase mb-1.5"><span>Dr√¥le</span> <span>S√©rieux</span></div><input type="range" min="-100" max="100" value="${formData.vibeSeriousness}" oninput="window.updateInput('vibeSeriousness', this.value, 'SERIOUSNESS...'); updateRangeLabel(this, 'label-serious')" class="w-full h-1 bg-gray-300 appearance-none cursor-pointer accent-[#00F0FF] relative z-10"><span id="label-serious" class="range-value" style="left: 50%">${formatVibeLabel(formData.vibeSeriousness, 'seriousness')}</span></div><div class="range-wrap"><div class="flex justify-between text-[9px] md:text-[10px] font-bold uppercase mb-1.5"><span>Minimaliste</span> <span>Complexe</span></div><input type="range" min="-100" max="100" value="${formData.vibeStyle}" oninput="window.updateInput('vibeStyle', this.value, 'COMPLEXITY...'); updateRangeLabel(this, 'label-style')" class="w-full h-1 bg-gray-300 appearance-none cursor-pointer accent-[#00F0FF] relative z-10"><span id="label-style" class="range-value" style="left: 50%">${formatVibeLabel(formData.vibeStyle, 'style')}</span></div></div><div><label class="block text-[10px] md:text-xs font-black uppercase tracking-widest mb-1.5 md:mb-1.5 text-black">Copywriting</label><div class="flex gap-2 md:gap-3"><button onclick="window.selectCopy('me')" id="copy-me" class="flex-1 py-2.5 md:py-3 border-2 font-black text-[9px] md:text-xs uppercase transition-all ${formData.copywriting === 'me' ? 'bg-black text-white border-black shadow-[4px_4px_0px_0px_#00F0FF]' : 'bg-white text-gray-500 border-gray-200 hover:border-black'}">J'ai mes textes</button><button onclick="window.selectCopy('arthur')" id="copy-arthur" class="flex-1 py-2.5 md:py-3 border-2 font-black text-[9px] md:text-xs uppercase transition-all relative ${formData.copywriting === 'arthur' ? 'bg-black text-white border-black shadow-[4px_4px_0px_0px_#00F0FF]' : 'bg-white text-gray-500 border-gray-200 hover:border-black'}">Arthur s'en charge<span class="absolute -top-1.5 -right-1.5 md:-top-2 md:-right-2 bg-[#00F0FF] text-white text-[7px] md:text-[9px] px-1 md:px-2 py-0.5 font-bold uppercase transform rotate-12">Offert</span></button></div></div></div><div class="md:col-span-1"><div class="relative border-2 border-dashed border-gray-300 hover:border-[#00F0FF] bg-white p-3 md:p-6 text-center cursor-pointer transition-all group h-full flex flex-col items-center justify-center"><input type="file" multiple onchange="window.handleFileSelect(this)" class="absolute inset-0 w-full h-full opacity-0 cursor-pointer" /><p id="file-label" class="text-[10px] md:text-sm font-black uppercase text-gray-400 group-hover:text-[#00F0FF] transition-colors">üìÇ DRAG & DROP ASSETS<br><span class="text-[9px] md:text-[10px] font-normal normal-case opacity-60">Logo, Photos, Textes, Charte...</span></p></div>${fileListHTML}</div></div>`;
}
if(currentStep === 5) {
return `<div class="step-grid grid-cols-1 md:grid-cols-12 gap-4 md:gap-6 animate-fadeIn h-screen-adaptive"><div class="md:col-span-12 border-l-4 border-[#00F0FF] pl-3 md:pl-4 mb-2 md:mb-2"><h2 class="text-2xl md:text-4xl font-black uppercase text-slate-900 leading-none">L'OFFRE</h2></div>${!formData.selectedPack ? `<div class="md:col-span-12 grid grid-cols-1 md:grid-cols-3 gap-3 md:gap-4 h-full items-stretch">${PACKS.map(p => `<button onclick="window.selectPack('${p.id}')" class="text-left p-4 md:p-5 border-2 border-gray-100 hover:border-black hover:bg-gray-50 transition-all group flex flex-col justify-between h-full transform hover:-translate-y-2 duration-300"><div><div class="flex justify-between items-start mb-2 md:mb-3"><span class="font-black text-xl md:text-xl uppercase text-black group-hover:text-[#00F0FF] transition-colors">${p.name}</span><span class="bg-black text-white text-[10px] md:text-xs font-bold px-2 py-1 transform -skew-x-12">${p.price}‚Ç¨</span></div><p class="text-xs md:text-sm text-gray-500 font-medium uppercase tracking-wide leading-relaxed">${p.desc}</p></div><div class="mt-3 md:mt-4 text-[10px] md:text-xs font-bold uppercase underline">S√©lectionner -></div></button>`).join('')}</div>` : `<div class="md:col-span-12 flex flex-col justify-center"><div class="bg-black text-white p-4 md:p-5 shadow-[8px_8px_0px_0px_#00F0FF] flex justify-between items-center mb-4 md:mb-5"><div><span class="block text-[10px] md:text-xs font-bold text-gray-400 uppercase tracking-widest mb-1">Pack S√©lectionn√©</span><span class="font-black text-xl md:text-2xl uppercase">${PACKS.find(p => p.id === formData.selectedPack).name}</span></div><button onclick="window.resetPack()" class="text-xs md:text-sm font-bold uppercase text-[#00F0FF] hover:text-white underline">Changer</button></div><div class="space-y-2"><h3 class="text-xs md:text-sm font-black uppercase text-black border-b-2 border-black pb-1 mb-2 md:mb-3">Options suppl√©mentaires</h3>${(UPSELLS[formData.selectedPack] || []).map(u => renderUpsellCard(u)).join('')}</div></div>`}</div>`;
}
if(currentStep === 6) {
return `<div class="animate-fadeIn h-screen-adaptive"><div class="border-l-4 border-[#00F0FF] pl-3 md:pl-4 mb-4 md:mb-6"><h2 class="text-2xl md:text-4xl font-black uppercase text-slate-900 leading-none">VALIDATION</h2><p class="text-gray-400 text-[10px] md:text-xs font-bold uppercase tracking-widest mt-1">Derni√®re ligne droite.</p></div><div class="grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6 items-start">${formData.selectedPack !== 'MAQUETTE' ? `<div class="space-y-3 md:space-y-3"><div class="bg-gray-50 p-3 border border-gray-200"><p class="text-[10px] md:text-xs font-black uppercase tracking-widest mb-2 text-black">Avez-vous un nom de domaine ?</p><div class="flex gap-2 mb-2"><button onclick="window.selectDomain(true)" id="dom-yes" class="flex-1 py-2 border-2 font-black uppercase text-[10px] md:text-xs transition-all ${formData.hasDomain === true ? 'bg-black text-white border-black' : 'bg-white border-gray-300 hover:border-black'}">Oui</button><button onclick="window.selectDomain(false)" id="dom-no" class="flex-1 py-2 border-2 font-black uppercase text-[10px] md:text-xs transition-all ${formData.hasDomain === false ? 'bg-black text-white border-black' : 'bg-white border-gray-300 hover:border-black'}">Non</button></div><div id="domain-content">${formData.hasDomain === true ? `<div class="animate-fadeIn"><input type="text" value="${formData.domainName}" oninput="window.updateInput('domainName', this.value, 'DOMAIN INPUT...')" class="w-full p-2 border-b-2 border-black bg-transparent font-bold outline-none placeholder-gray-400 text-sm" placeholder="ex: monsite.com"><p class="text-[9px] md:text-[10px] font-bold uppercase text-green-600 mt-1.5">‚úì Je m'engage √† fournir les acc√®s DNS.</p></div>` : ''}${formData.hasDomain === false ? `<p class="text-[9px] md:text-[10px] font-bold uppercase text-[#00F0FF] animate-fadeIn">‚ö†Ô∏è Le nom de domaine reste √† votre charge.</p>` : ''}</div></div><div class="bg-blue-50 p-3 border border-blue-200 relative overflow-hidden"><div class="absolute -right-6 -top-6 w-16 h-16 bg-blue-200 rounded-full blur-xl opacity-50"></div><h3 class="text-xs font-black uppercase text-blue-900 mb-2">Offre Care</h3><div class="flex flex-col gap-2"><p class="text-[10px] text-blue-800 font-medium">Hebergement, mises √† jour de s√©curit√© et modifications mineures (1h/mois).</p><label class="flex items-center cursor-pointer justify-between"><span class="text-[10px] md:text-xs font-black uppercase text-blue-900">+90‚Ç¨/mois</span><div class="relative"><input type="checkbox" id="care-toggle" class="sr-only" onchange="window.toggleCare()" ${formData.care ? 'checked' : ''}><div class="w-10 h-6 bg-gray-200 rounded-full shadow-inner transition-colors ${formData.care ? 'bg-blue-600' : ''}"></div><div class="dot absolute w-4 h-4 bg-white rounded-full shadow left-1 top-1 transition-transform ${formData.care ? 'transform translate-x-4' : ''}"></div></div></label></div></div></div>` : '<div></div>'}<div class="bg-white p-4 md:p-5 border-2 border-gray-100 shadow-xl"><div class="space-y-3"><div class="group"><label class="block text-[10px] md:text-xs font-black uppercase tracking-widest mb-1.5 text-black">Email Pro <span class="text-[#00F0FF]">*</span></label><input type="email" id="input-email" value="${formData.email}" oninput="window.updateInput('email', this.value)" class="w-full p-2.5 md:p-3 bg-gray-50 border-2 border-gray-200 focus:border-[#00F0FF] outline-none font-bold text-base md:text-lg" placeholder="hello@entreprise.com"></div><div class="group"><label class="block text-[10px] md:text-xs font-black uppercase tracking-widest mb-1.5 text-black">T√©l√©phone <span class="text-[#00F0FF]">*</span></label><input type="tel" id="input-phone" value="${formData.phone}" oninput="window.updateInput('phone', this.value)" class="w-full p-2.5 md:p-3 bg-gray-50 border-2 border-gray-200 focus:border-[#00F0FF] outline-none font-bold text-base md:text-lg" placeholder="06 00 00 00 00"></div><button onclick="window.submitForm()" id="submitBtn" class="w-full py-3 md:py-4 bg-[#00F0FF] text-white font-black text-base md:text-xl uppercase tracking-widest hover:bg-black transition-all shadow-[8px_8px_0px_0px_#000000] hover:translate-y-1 hover:shadow-none transform mt-2">Bloquer mon slot üîí</button><div class="text-center mt-2"><p class="text-[9px] md:text-[10px] text-gray-500 uppercase font-bold">Aucun paiement requis maintenant.</p><p class="text-[9px] md:text-[10px] font-bold uppercase text-[#00F0FF]">Nous analysons d'abord votre brief et vous paierez uniquement apr√®s validation, demain matin.</p></div></div></div></div></div>`;
}
if(currentStep === 7) {
var totalSuccessUpsells = 0;
var bundleSelected = formData.upsellsSuccess['tomorrowSucces'];
UPSELLS_SUCCESS.forEach(u => {
if(formData.upsellsSuccess[u.id]) {
if(u.id === 'tomorrowSucces') {
totalSuccessUpsells += u.price;
} else if(!bundleSelected) {
totalSuccessUpsells += u.price;
if(u.id === 'socialMedia' && formData.socialNetworkExtra) totalSuccessUpsells += 80;
}
}
});
return `<div class="flex flex-col items-start justify-start p-4 md:p-8 bg-white animate-fadeIn max-w-5xl mx-auto w-full">
<div class="w-full mb-8">
<div class="flex justify-between items-center mb-4">
<h2 class="text-3xl md:text-5xl font-black uppercase text-black">BOOSTEZ VOTRE LANCEMENT</h2>
<div class="text-right">
<div class="text-xs text-gray-400 uppercase font-bold mb-1">Offre limit√©e</div>
<div id="countdown" class="countdown">02:00</div>
</div>
</div>
<p class="text-sm text-gray-600">Profitez d'options exclusives pour maximiser l'impact de votre nouveau site</p>
</div>
<div class="upsell-success-grid w-full mb-8">
${UPSELLS_SUCCESS.map(u => {
var selected = formData.upsellsSuccess[u.id] || false;
var isBundle = u.isBundle;
return `<div onclick="window.toggleSuccessUpsell('${u.id}')" class="upsell-card ${selected ? 'selected' : ''} ${isBundle ? 'border-[#00F0FF] border-2' : ''}">
${isBundle ? '<div class="absolute top-2 right-2 bg-[#00F0FF] text-white text-[9px] px-2 py-0.5 font-bold uppercase">BEST DEAL</div>' : ''}
<div class="flex items-start gap-3 flex-1">
<div class="upsell-check">${selected ? '‚úì' : ''}</div>
<div class="flex-1">
<div class="flex items-center gap-2 mb-1">
<span class="font-bold text-sm text-black uppercase">${u.name}</span>
<div class="tooltip">
<span class="text-xs text-gray-400 cursor-help">‚ìò</span>
<span class="tooltiptext">${u.tooltip}</span>
</div>
</div>
${u.desc ? `<p class="text-xs text-gray-500 font-normal mb-2 leading-snug">${u.desc}</p>` : ''}
${isBundle ? `<div class="text-xs"><span class="line-through text-gray-400">${u.originalPrice}‚Ç¨</span> <span class="text-[#00F0FF] font-bold">${u.price}‚Ç¨</span></div>` : `<div class="text-xs font-black text-black">${u.price}‚Ç¨</div>`}
</div>
</div>
</div>
${selected && u.hasNetwork ? `<div class="col-span-full ml-8 p-3 bg-gray-50 border border-gray-200">
<label class="block text-xs font-bold mb-2">R√©seau de pr√©dilection :</label>
<div class="flex gap-4 mb-3">
<label><input type="radio" name="socialNetwork" value="Instagram" ${formData.socialNetwork === 'Instagram' ? 'checked' : ''} onchange="formData.socialNetwork = this.value; draw();"> Instagram (8 posts)</label>
<label><input type="radio" name="socialNetwork" value="LinkedIn" ${formData.socialNetwork === 'LinkedIn' ? 'checked' : ''} onchange="formData.socialNetwork = this.value; draw();"> LinkedIn (6 posts)</label>
</div>
<label class="flex items-center">
<input type="checkbox" ${formData.socialNetworkExtra ? 'checked' : ''} onchange="formData.socialNetworkExtra = this.checked; draw();"> Ajouter l'autre r√©seau (+80‚Ç¨)
</label>
</div>` : ''}`;
}).join('')}
</div>
${totalSuccessUpsells > 0 ? `<div class="w-full bg-black text-white p-6 mb-6 flex justify-between items-center">
<span class="font-black text-xl uppercase">TOTAL OPTIONS</span>
<span class="font-black text-3xl text-[#00F0FF]">${totalSuccessUpsells}‚Ç¨</span>
</div>` : ''}
<div class="flex gap-4 w-full">
<button onclick="window.skipSuccessUpsells()" class="flex-1 py-4 border-2 border-gray-300 text-gray-600 font-bold uppercase hover:border-black hover:text-black transition">Passer</button>
<button onclick="window.submitSuccessUpsells()" class="flex-1 py-4 bg-[#00F0FF] text-white font-black uppercase hover:bg-black transition">Bloquer ces options</button>
</div>
</div>`;
}
}
function formatVibeLabel(value, type) {
if (value === 0) return 'Neutre';
var absValue = Math.abs(value);
if (type === 'seriousness') {
return value < 0 ? `+${absValue}% Dr√¥le` : `+${absValue}% S√©rieux`;
}
if (type === 'style') {
return value < 0 ? `+${absValue}% Minimaliste` : `+${absValue}% Complexe`;
}
return value + '%';
}
function formatVibeData(value, type) {
if (value === 0) return 'Neutre';
var absValue = Math.abs(value);
if (type === 'seriousness') {
return value < 0 ? `+${absValue}% dr√¥le` : `+${absValue}% s√©rieux`;
}
if (type === 'style') {
return value < 0 ? `+${absValue}% minimaliste` : `+${absValue}% complexe`;
}
return value + '%';
}
function updateRangeLabel(input, labelId) {
if (!input) return;
var val = parseInt(input.value);
var label = document.getElementById(labelId);
if (!label) return;
var type = labelId.includes('serious') ? 'seriousness' : 'style';
label.innerHTML = formatVibeLabel(val, type);
var percent = ((val + 100) * 100) / 200;
label.style.left = `calc(${percent}% + (${8 - percent * 0.15}px))`;
}
function draw(preserveScroll) {
var container = document.getElementById('modalContent');
if(!container) return;
var scrollPos = preserveScroll ? container.querySelector('.overflow-y-auto')?.scrollTop || 0 : 0;
var progress = (currentStep / totalSteps) * 100;
var totals = calculateTotals();
var showTotals = formData.selectedPack !== '';
container.innerHTML = `${renderHeader(progress)}<div class="flex-grow w-full flex justify-center bg-white overflow-y-auto relative"><div class="w-full max-w-7xl px-4 md:px-6 py-3 md:py-4 h-full flex flex-col justify-start">${getStepContent()}</div></div><div class="flex-none w-full z-50"><div class="bg-black text-white px-6 py-2 border-b border-gray-800 flex flex-wrap gap-4 justify-between items-center text-[10px] font-mono"><div class="flex gap-4 items-center"><span class="opacity-50">VOTRE SLOT: <span id="consoleSlotId" class="text-white font-bold">...</span></span><span class="text-white font-bold uppercase text-xs" id="consoleBrandName">${formData.brandName || 'NOUVELLE MARQUE'}</span></div><div class="flex items-center gap-4 flex-1 justify-end">${showTotals ? `<div class="flex gap-4 items-center animate-fadeIn totals-mobile"><div class="flex gap-2 items-center"><span class="uppercase text-gray-400">ESTIMATION:</span><span class="font-bold">${totals.delay}H</span></div><div class="bg-[#00F0FF] text-black px-2 py-0.5 font-bold">${totals.price}‚Ç¨</div></div>` : ''}<div id="consoleOutput" class="text-gray-400 font-bold uppercase animate-pulse min-w-[150px] text-right overflow-hidden whitespace-nowrap hidden sm:block"><span class="text-[#00F0FF] font-bold">> SYSTEM:</span> ${currentConsoleMessage}</div></div></div><div class="bg-white border-t border-gray-200 p-4 md:p-6 shadow-[0px_-5px_20px_rgba(0,0,0,0.05)]"><div class="w-full max-w-7xl mx-auto flex justify-between items-center"><button onclick="window.handleCloseOrBack()" class="group flex items-center gap-2 text-[10px] md:text-xs font-bold uppercase text-gray-400 hover:text-[#00F0FF] tracking-widest transition-colors py-2"><span class="text-lg group-hover:-translate-x-1 transition-transform">‚Üê</span><span>${currentStep === 1 ? 'FERMER' : (currentStep === 7 ? 'PASSER' : 'ABANDONNER (AVEC REGRET)')}</span></button><div class="flex gap-4">${currentStep > 1 && currentStep < 7 ? `<button onclick="window.prevStep()" class="px-4 md:px-6 py-3 md:py-4 border-2 border-gray-100 hover:border-black text-[10px] md:text-xs font-bold uppercase tracking-widest transition-all">PR√âC√âDENT</button>` : ''}${currentStep < 6 ? `<button onclick="window.nextStep()" class="px-6 md:px-10 py-3 md:py-4 bg-black text-white text-xs md:text-sm font-black uppercase tracking-widest hover:bg-[#00F0FF] transition-all shadow-[4px_4px_0px_0px_rgba(0,0,0,0.2)] hover:shadow-none hover:translate-x-[2px] hover:translate-y-[2px]">SUIVANT ‚Üí</button>` : ''}</div></div></div></div>`;
if(preserveScroll && scrollPos > 0) {
var scrollContainer = container.querySelector('.overflow-y-auto');
if(scrollContainer) scrollContainer.scrollTop = scrollPos;
}
var slotEl = document.getElementById('consoleSlotId'); if(slotEl) slotEl.innerText = document.getElementById('slotId') ? document.getElementById('slotId').innerText : '8842';
if(currentStep === 4) { setTimeout(() => { updateRangeLabel(document.querySelector('input[oninput*="vibeSeriousness"]'), 'label-serious'); updateRangeLabel(document.querySelector('input[oninput*="vibeStyle"]'), 'label-style'); }, 100); }
if(currentStep === 7 && !countdownStarted) { startCountdown(); countdownStarted = true; }
}
window.selectArchetype = function(id) { formData.archetype = id; typeConsole('ARCHETYPE SELECTED'); draw(); };
window.selectCopy = function(val) { formData.copywriting = val; typeConsole('COPYWRITING UPDATED'); draw(); };
window.toggleUpsell = function(key) { formData.upsells[key] = !formData.upsells[key]; typeConsole('OPTION UPDATED'); draw(true); };
window.toggleSuccessUpsell = function(key) {
formData.upsellsSuccess[key] = !formData.upsellsSuccess[key];
if(key === 'tomorrowSucces' && formData.upsellsSuccess[key]) {
UPSELLS_SUCCESS.forEach(u => { if(u.id !== 'tomorrowSucces') formData.upsellsSuccess[u.id] = false; });
} else if(formData.upsellsSuccess[key] && formData.upsellsSuccess['tomorrowSucces']) {
formData.upsellsSuccess['tomorrowSucces'] = false;
}
typeConsole('UPSELL UPDATED');
draw();
};
window.toggleLang = function(lang) {
var idx = formData.multiLangues.indexOf(lang);
if(idx > -1) formData.multiLangues.splice(idx, 1);
else formData.multiLangues.push(lang);
draw(true);
};
window.toggleCare = function() { formData.care = !formData.care; typeConsole('CARE OPTION UPDATED'); draw(); };
window.selectPack = function(id) { formData.selectedPack = id; typeConsole('PACK SELECTED: ' + id); draw(); };
window.resetPack = function() { formData.selectedPack = ''; formData.upsells = {}; typeConsole('RESET SELECTION'); draw(); };
window.selectDomain = function(bool) { formData.hasDomain = bool; typeConsole('DOMAIN INFO UPDATED'); draw(); };
window.handleFileSelect = function(input) { if(input.files.length > 0) { for(let f of input.files) { fileStore.push(f); } typeConsole('FILES UPLOADED'); draw(); } input.value = ''; };
window.removeFile = function(index) { fileStore.splice(index, 1); typeConsole('FILE REMOVED'); draw(); };
window.nextStep = function() { if(currentStep < totalSteps) { currentStep++; typeConsole('STEP ' + currentStep + ' INITIALIZED'); draw(); } };
window.prevStep = function() { if(currentStep > 1 && currentStep < 7) { currentStep--; typeConsole('ROLLBACK TO STEP ' + currentStep); draw(); } };
window.handleCloseOrBack = function() {
if (currentStep === 1) window.closeModal();
else if(currentStep === 7) window.skipSuccessUpsells();
else if(confirm("Abandonner le projet ?")) window.closeModal();
};
window.openModal = function(plan) { currentStep = 1; formData.selectedPack = ''; typeConsole('SYSTEM SECURE CONNECTION...'); draw(); var m = document.getElementById('bookingModal'); var c = document.getElementById('modalContent'); var langSwitch = document.querySelector('.lang-switch-container'); if(langSwitch) langSwitch.style.display = 'none'; if(m) { m.classList.remove('hidden'); lockScroll(); } if(c) { c.classList.remove('translate-x-full'); void c.offsetWidth; } };
window.closeModal = function() { var m = document.getElementById('bookingModal'); var c = document.getElementById('modalContent'); if(c) c.classList.add('translate-x-full'); setTimeout(() => { if(m) m.classList.add('hidden'); unlockScroll(); var langSwitch = document.querySelector('.lang-switch-container'); if(langSwitch) langSwitch.style.display = ''; }, 300); };
window.submitForm = function() {
if(!checkValidation()) return;
var btn = document.getElementById('submitBtn');
if(btn) btn.innerHTML = "TRANSMISSION...";
typeConsole('SENDING DATA...');
var totals = calculateTotals();
var dataToSend = { 
...formData, 
...totals,
vibeSeriousnessFormatted: formatVibeData(formData.vibeSeriousness, 'seriousness'),
vibeStyleFormatted: formatVibeData(formData.vibeStyle, 'style')
};
var formDataObj = new FormData();
formDataObj.append("_captcha", "false");
formDataObj.append("_template", "table");
formDataObj.append("_autoresponse", "Merci pour votre confiance. Votre brief a bien √©t√© re√ßu. Un membre de l'√©quipe vous appellera demain entre 09H00 et 10H00 pour validation.");
formDataObj.append("_subject", "üöÄ NOUVEAU LEAD - " + (dataToSend.brandName || "Projet Inconnu"));
formDataObj.append("_cc", "mf.phan@bigneurons.com,t.martella@bigneurons.com,a.escare@bigneurons.com");
for (var key in dataToSend) { formDataObj.append(key, JSON.stringify(dataToSend[key])); }
if(fileStore.length > 0) { for(let f of fileStore) { formDataObj.append("files[]", f); } }
fetch(FORM_ACTION_URL, { method: 'POST', body: formDataObj }).then(response => {
currentStep = 7;
draw();
}).catch(error => { alert("Erreur de transmission."); if(btn) btn.innerHTML = "Bloquer mon slot üîí"; });
};
window.skipSuccessUpsells = function() {
countdownStarted = false;
document.getElementById('modalContent').innerHTML = `<div class="h-full flex flex-col items-center justify-center p-8 bg-white animate-fadeIn max-w-3xl mx-auto w-full"><div class="success-check">‚úì</div><h2 class="text-4xl md:text-6xl font-black uppercase text-black mb-2 text-center">MISSION <BR> PRE-ACCEPT√âE</h2><p class="font-bold uppercase tracking-widest text-gray-400 mb-12 text-sm">Le compte √† rebours sera lanc√© apr√®s validation.</p><div class="w-full max-w-md bg-gray-50 border-2 border-black p-6 mb-8 relative"><div class="absolute -top-8 left-1/2 transform -translate-x-1/2 bg-white px-2 font-black text-xs uppercase text-[#00F0FF]">Rapport de mission</div><div class="space-y-4 font-mono text-sm"><div class="checklist-item flex items-center gap-3"><span class="text-green-500 font-bold">‚úì</span> <span class="text-gray-400 line-through">R√©ception des donn√©es</span></div><div class="checklist-item flex items-center gap-3"><span class="text-green-500 font-bold">‚úì</span> <span class="text-gray-400 line-through">Cr√©ation du dossier client</span></div><div class="checklist-item flex items-center gap-3"><span class="text-green-500 font-bold">‚úì</span> <span class="text-gray-400 line-through">Notification de l'√©quipe</span></div><div class="checklist-item flex items-center gap-3 font-bold bg-yellow-100 p-2 border border-yellow-300"><span class="animate-pulse">‚óè</span> <span>Analyse par un humain (En cours)</span></div></div></div><div class="text-center space-y-2"><p class="font-black uppercase text-sm">Prochaine √©tape :</p><p class="text-gray-600 text-sm">Vous recevrez un appel de validation <br>demain entre 09H00 et 10H00.</p><br><p class="text-gray-600 text-sm">Le paiement s'effectuera seulement apr√®s cet appel.</p></div><button onclick="window.closeModal()" class="mt-12 px-8 py-4 bg-black text-white font-black uppercase hover:bg-[#00F0FF] transition-all shadow-[4px_4px_0px_0px_rgba(0,0,0,0.2)]">Fermer la console</button></div>`;
const items = document.querySelectorAll('.checklist-item');
items.forEach((item, index) => { setTimeout(() => { item.classList.add('visible'); }, index * 600); });
if(countdownTimer) clearInterval(countdownTimer);
};
window.submitSuccessUpsells = function() {
var formDataObj = new FormData();
formDataObj.append("_captcha", "false");
formDataObj.append("_template", "table");
formDataObj.append("_subject", "üéÅ UPSELLS - " + (formData.brandName || "Projet Inconnu"));
formDataObj.append("_cc", "mf.phan@bigneurons.com,t.martella@bigneurons.com,a.escare@bigneurons.com");
formDataObj.append("brandName", formData.brandName);
formDataObj.append("email", formData.email);
formDataObj.append("upsellsSuccess", JSON.stringify(formData.upsellsSuccess));
formDataObj.append("socialNetwork", formData.socialNetwork);
formDataObj.append("socialNetworkExtra", formData.socialNetworkExtra);
fetch(FORM_ACTION_URL_UPSELL, { method: 'POST', body: formDataObj }).then(response => {
window.skipSuccessUpsells();
}).catch(error => { alert("Erreur."); });
};
function startCountdown() {
var timeLeft = 120;
if(countdownTimer) clearInterval(countdownTimer);
countdownTimer = setInterval(function() {
timeLeft--;
var minutes = Math.floor(timeLeft / 60);
var seconds = timeLeft % 60;
var countdownEl = document.getElementById('countdown');
if(countdownEl) countdownEl.innerText = `0${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;
if(timeLeft <= 0) { clearInterval(countdownTimer); window.skipSuccessUpsells(); }
}, 1000);
}
document.addEventListener("DOMContentLoaded", function() {
var slotEl = document.getElementById('slotId');
if(slotEl) slotEl.innerText = Math.floor(Math.random() * 9000) + 1000;
if (typeof gsap !== 'undefined') {
try {
gsap.to('.hero-load', { y: 0, opacity: 1, duration: 1, ease: "power3.out", stagger: 0.2, delay: 0.2 });
var marqueeContent = document.querySelector('.marquee-content');
if(marqueeContent) { marqueeContent.innerHTML += marqueeContent.innerHTML; gsap.to('.marquee-content', { x: '-50%', duration: 20, ease: 'none', repeat: -1 }); }
var reveals = document.querySelectorAll('.reveal-text');
reveals.forEach(function(text) { gsap.fromTo(text, { y: 50, opacity: 0 }, { y: 0, opacity: 1, duration: 1, ease: "power3.out", scrollTrigger: { trigger: text, start: "top 80%" } }); });
} catch(e) {}
}
document.addEventListener('keydown', function(event) { if (event.key === "Escape") window.closeModal(); });
var originalTitle = document.title;
window.addEventListener('blur', function() { document.title = "‚ö†Ô∏è Ne perdez pas votre slot..."; });
window.addEventListener('focus', function() { document.title = originalTitle; });
});
</script>
  </div>
  <script src="https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.5.1.min.dc5e7f18c8.js?site=69296dff64369c09698b8e09" type="text/javascript" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
